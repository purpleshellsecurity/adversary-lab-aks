# ============================================================================
# AKS Adversary Lab - Container Insights Agent Configuration
# Enables ContainerLogV2 schema for structured container log queries
# Must be applied before or shortly after cluster creation
# ============================================================================

apiVersion: v1
kind: ConfigMap
metadata:
  name: container-azm-ms-agentconfig
  namespace: kube-system
data:
  schema-version: v1
  config-version: ver1
  agent-settings: |-
    [agent_settings.log_collection]
      [agent_settings.log_collection.schema]
        containerlog_schema_version = "v2"
